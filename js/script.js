"use strict";let year;year=(new Date).getFullYear();let daysinyear=+leapYear(year)+365;function leapYear(e){return 0==(3&e)&&(e%25!=0||0==(15&e))}let alpha,day=delta(year);function delta(e){let o=new Date,n=new Date(e,0,1);return Math.floor((o.getTime()-n.getTime())/1e3/60/60/24)}alpha=day/daysinyear*360;let S=100,L=50;const wheel=document.querySelector("#wheel"),sample=document.querySelector(".tools__sample"),ele=document.querySelectorAll(".mousePoint");let pointRED,string,lineMonoH,lineMonoS,lineMonoL,lineDuoH,lineDuoS,lineDuoL,lineThreH,lineThreS,lineThreL,lineQuadH,lineQuadS,lineQuadL,corner=[0,90,120,180,240,270],coord=wheel.getBoundingClientRect(),xWheel=coord.x,yWheel=coord.y,nWheel=coord.width/2,centerX=coord.x+nWheel,centerY=coord.y+nWheel,normalize=nWheel/100,X=S*Math.sin(radianAlpha()),Y=S*Math.cos(radianAlpha());const monolist=document.querySelector("#mono"),mono=monolist.children,duolist=document.querySelector("#duo"),duo=duolist.children,threlist=document.querySelector("#thre"),thre=threlist.children,quadlist=document.querySelector("#quad"),quad=quadlist.children;let volume=mono.length,middle=(volume-1)/2,steps=middle-1;const firstLine=document.querySelector("#colorDAY"),colorLine=document.querySelector("#colorHSL");function fillMono(e,o,n,t){for(let l=0;l<e.length;l++)string=`hsl(${o[l]}, ${n[l]}%, ${t[l]}%)`,e[l].style.backgroundColor=string,e[l].style.boxShadow=`0 0 2.5vh 2px ${string}`}function setAlpha(e,o,n,t){string=`hsl(${o}, ${n}%, ${t}%)`,e.style.backgroundColor=string}function mouseon(){wheel.addEventListener("mousedown",mouseReady,!0),console.log("смотрим")}function mouseoff(){wheel.removeEventListener("mouseup",mouseClick,!0),console.log("не смотрим")}function mouseReady(){wheel.addEventListener("mousemove",mouseClick,!0)}function mouseClick(e){pointRED=colorPicker()}function colorPicker(){alpha=getAlpha(),setAlpha(sample,alpha,S,L),initHSL(alpha,S,L),fillMono(mono,lineMonoH,lineMonoS,lineMonoL),fillMono(duo,lineDuoH,lineDuoS,lineDuoL),fillMono(thre,lineThreH,lineThreS,lineThreL),fillMono(quad,lineQuadH,lineQuadS,lineQuadL),posMouse(ele),firstText(),colorText(),changeBackgroundBody();sample.style.backgroundColor}function fromTo(e,o,n,t){if(o<e)return;let l=[],i=o-e+1,r=(t-n)/(i-1);l[0]=n;for(let e=1;e<i-1;e++)l[e]=l[e-1]+r;return l.push(t),l}function initHSL(e,o,n){lineMonoH=[].concat(fromTo(0,10,e,e)),lineMonoS=[].concat(fromTo(0,10,o,o)),lineMonoL=[].concat(fromTo(0,4,0,n-10),n,fromTo(6,10,n+10,100)),lineDuoH=[].concat(fromTo(0,2,e-180,e-180),e-180,fromTo(4,6,e-135,e-90),e,fromTo(8,10,e,e)),lineDuoS=[].concat(fromTo(0,10,o,o)),lineDuoL=[].concat(fromTo(0,2,0,n-10),n,fromTo(4,6,n,n),n,fromTo(8,10,n+10,100)),lineThreH=[].concat(fromTo(0,1,e-280,e-280),e-240,fromTo(3,4,e-200,e-160),e-120,fromTo(6,7,e-80,e-40),e,fromTo(9,10,e,e)),lineThreS=[].concat(fromTo(0,10,o,o)),lineThreL=[].concat(fromTo(0,1,0,n),fromTo(2,8,n,n),fromTo(9,10,n,100)),lineQuadH=[].concat(e-270,fromTo(1,2,e-240,e-210),e-180,fromTo(4,6,e-157.5,e-112.5),e-90,fromTo(8,9,e-60,e-30),e),lineQuadS=[].concat(fromTo(0,10,o,o)),lineQuadL=[].concat(fromTo(0,10,n,n))}function onMouseMove(e){X=(e.offsetX-nWheel)/normalize,Y=(nWheel-e.offsetY)/normalize,alpha=getAlpha(),S=getS(),posMouse(ele),colorPicker()}function getAlpha(){return alpha=(90-180*Math.atan2(Y,X)/Math.PI)%360,alpha<0&&(alpha=360+alpha),alpha}function radianAlpha(){return alpha/180*Math.PI}function getS(){return S=Math.sqrt(Math.pow(X,2)+Math.pow(Y,2))+.2,S>100&&(S=100),S}function realX(e){return e*normalize+nWheel}function realY(e){return nWheel-e*normalize}function posMouse(e){pointFirst(e[0],X,Y);for(let o=1;o<e.length;o++)pointFirst(e[o],pointPositionX(corner[o]),pointPositionY(corner[o]))}function pointFirst(e,o,n){e.style.left=realX(o)+"px",e.style.top=realY(n)+"px"}function pointPositionX(e){return X*Math.cos(e*Math.PI/180)-Y*Math.sin(e*Math.PI/180)}function pointPositionY(e){return X*Math.sin(e*Math.PI/180)+Y*Math.cos(e*Math.PI/180)}posMouse(ele),initHSL(alpha,S,L),fillMono(mono,lineMonoH,lineMonoS,lineMonoL),fillMono(duo,lineDuoH,lineDuoS,lineDuoL),fillMono(thre,lineThreH,lineThreS,lineThreL),fillMono(quad,lineQuadH,lineQuadS,lineQuadL),setAlpha(sample,alpha,S,L),colorText(),changeBackgroundBody(),wheel.onmousedown=function(e){wheel.addEventListener("mousemove",onMouseMove),onMouseMove(e),wheel.onmouseup=function(){wheel.removeEventListener("mousemove",onMouseMove),wheel.onmouseup=null,console.log("no listen")}};let tools__lightbox=slider.querySelector(".tools__lightbox"),hNormalize=(slider.getBoundingClientRect().height-tools__lightbox.getBoundingClientRect().height)/100;function firstText(){(firstLine.textContent="Цвет:")||(firstLine.textContent="Цвет:")}function colorText(){colorLine.textContent=`hsl(${Math.round(100*alpha)/100}, ${Math.round(100*S)/100}%, ${Math.round(100*L)/100}%)`}function changeBackgroundBody(){let e=document.body,o=`radial-gradient(circle at 50% -60%, rgba(255, 255, 255, .99) 70%, transparent), \n\tlinear-gradient(rgba(255,255,255,.5) 2px, transparent 2px) -2px -2px / 80px 80px, \n\tlinear-gradient(90deg, rgba(255,255,255,.5) 2px, transparent 2px)  -2px -2px / 80px 80px, \n\tlinear-gradient(rgba(255,255,255,.28) 1px, transparent 1px) -1px -1px / 16px 16px, \n\tlinear-gradient(90deg, rgba(255,255,255,.28) 1px, transparent 1px) -1px -1px / 16px 16px, \n\tlinear-gradient(hsl(${alpha}, ${S}%, ${L}%), hsl(${alpha}, ${S}%, ${L}%))`;e.style.background=o}tools__lightbox.onmousedown=function(e){e.preventDefault();let o=e.clientY-tools__lightbox.getBoundingClientRect().top;function n(e){let n=e.clientY-o-slider.getBoundingClientRect().top-tools__lightbox.getBoundingClientRect().height;console.log("newTop = "+n),console.log("hNormalize = "+hNormalize),console.log("event.clientY = "+e.clientY),console.log("shiftY = "+o),console.log("slider.getBoundingClientRect().top = "+slider.getBoundingClientRect().top),console.log("tools__lightbox.getBoundingClientRect().height = "+tools__lightbox.getBoundingClientRect().height),console.log("=============================="),n<0&&(n=0);let t=slider.getBoundingClientRect().height-tools__lightbox.getBoundingClientRect().height;console.log("bottomEdge = "+t),n>t&&(n=t),tools__lightbox.style.top=n+"px",L=100-n/hNormalize,console.log("L = "+L),console.log("newTop = "+n),setAlpha(sample,alpha,S,L),initHSL(alpha,S,L),fillMono(mono,lineMonoH,lineMonoS,lineMonoL),fillMono(duo,lineDuoH,lineDuoS,lineDuoL),fillMono(thre,lineThreH,lineThreS,lineThreL),fillMono(quad,lineQuadH,lineQuadS,lineQuadL),firstText(),colorText(),changeBackgroundBody()}document.addEventListener("mousemove",n),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",n)}))},tools__lightbox.ondragstart=function(){return!1};